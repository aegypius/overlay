box: wercker-labs/docker
build:
  steps:
    - script:
        name: Pull latest overlay-env
        code: |-
          mkdir "$WERCKER_CACHE_DIR/docker-images/"
          if test -f "$WERCKER_CACHE_DIR/docker-images/repoman.tgz"; then docker load < "$WERCKER_CACHE_DIR/docker-images/repoman.tgz"; fi
          docker pull aegypius/repoman:latest
          docker save aegypius/repoman:latest > "$WERCKER_CACHE_DIR/docker-images/repoman.tgz"

    - script:
        name: List docker images (debug)
        code: |-
          docker images

    - script:
        name: Checking using repoman
        code: |-
          docker run -v $(pwd):/overlay -i -t aegypius/repoman:latest full --include-dev --pretend --verbose
